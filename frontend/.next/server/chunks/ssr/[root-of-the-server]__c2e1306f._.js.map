{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///E:/internshala-assignments/Real-Time-Chat/frontend/app/register/page.tsx"],"sourcesContent":["// app/register/page.tsx\r\n'use client';\r\n\r\nimport { useState, ChangeEvent, FormEvent } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { AuthFormData, AuthErrors } from '@/types/auth';\r\n\r\nexport default function Register() {\r\n  const router = useRouter();\r\n  const [formData, setFormData] = useState<AuthFormData>({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n  const [errors, setErrors] = useState<AuthErrors>({});\r\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\r\n\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement>): void => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    \r\n    // Clear error when user types\r\n    if (errors[name as keyof AuthErrors]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: AuthErrors = {};\r\n    \r\n    // Username validation\r\n    if (!formData.username?.trim()) {\r\n      newErrors.username = 'Username is required';\r\n    } else if (formData.username.trim().length < 2) {\r\n      newErrors.username = 'Username must be at least 2 characters';\r\n    } else if (formData.username.trim().length > 50) {\r\n      newErrors.username = 'Username must be less than 50 characters';\r\n    }\r\n    \r\n    // Email validation\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'Email is required';\r\n    } else if (!/^\\S+@\\S+\\.\\S+$/.test(formData.email)) {\r\n      newErrors.email = 'Please enter a valid email address';\r\n    }\r\n    \r\n    // Password validation\r\n    if (!formData.password) {\r\n      newErrors.password = 'Password is required';\r\n    } else if (formData.password.length < 6) {\r\n      newErrors.password = 'Password must be at least 6 characters';\r\n    }\r\n    \r\n    // Confirm password validation\r\n    if (!formData.confirmPassword) {\r\n      newErrors.confirmPassword = 'Please confirm your password';\r\n    } else if (formData.password !== formData.confirmPassword) {\r\n      newErrors.confirmPassword = 'Passwords do not match';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent<HTMLFormElement>): Promise<void> => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) return;\r\n    \r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/users/register', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          username: formData.username?.trim(),\r\n          email: formData.email.toLowerCase().trim(),\r\n          password: formData.password\r\n        }),\r\n      });\r\n      \r\n      const data = await response.json();\r\n\r\n      console.log(data)\r\n      \r\n      if (response.ok) {\r\n        router.push('/login?message=Registration successful. Please login.');\r\n      } else {\r\n        setErrors({ submit: data.message || 'Registration failed' });\r\n      }\r\n    } catch (error) {\r\n      setErrors({ submit: 'An error occurred. Please try again.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Helper function to conditionally apply class names\r\n  const getInputClassName = (fieldName: keyof AuthErrors): string => {\r\n    const baseClass = \"appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\";\r\n    const errorClass = errors[fieldName] ? \"border-red-500\" : \"border-gray-300\";\r\n    \r\n    return `${baseClass} ${errorClass}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Create your account\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            Or{' '}\r\n            <Link href=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n              sign in to your existing account\r\n            </Link>\r\n          </p>\r\n        </div>\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n          {errors.submit && (\r\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n              {errors.submit}\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"rounded-md shadow-sm -space-y-px\">\r\n            <div>\r\n              <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700\">\r\n                Username\r\n              </label>\r\n              <input\r\n                id=\"username\"\r\n                name=\"username\"\r\n                type=\"text\"\r\n                autoComplete=\"username\"\r\n                required\r\n                className={getInputClassName('username') + \" rounded-t-md\"}\r\n                placeholder=\"Username\"\r\n                value={formData.username || ''}\r\n                onChange={handleChange}\r\n              />\r\n              {errors.username && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.username}</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                required\r\n                className={getInputClassName('email')}\r\n                placeholder=\"Email address\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n              />\r\n              {errors.email && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                Password\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                autoComplete=\"new-password\"\r\n                required\r\n                className={getInputClassName('password')}\r\n                placeholder=\"Password\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n              />\r\n              {errors.password && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.password}</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div>\r\n              <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-700\">\r\n                Confirm Password\r\n              </label>\r\n              <input\r\n                id=\"confirmPassword\"\r\n                name=\"confirmPassword\"\r\n                type=\"password\"\r\n                autoComplete=\"new-password\"\r\n                required\r\n                className={getInputClassName('confirmPassword') + \" rounded-b-md\"}\r\n                placeholder=\"Confirm Password\"\r\n                value={formData.confirmPassword || ''}\r\n                onChange={handleChange}\r\n              />\r\n              {errors.confirmPassword && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.confirmPassword}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50\"\r\n            >\r\n              {isSubmitting ? 'Creating account...' : 'Create account'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}